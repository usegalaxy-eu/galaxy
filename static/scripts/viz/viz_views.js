define(["exports","libs/underscore"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,t}}(t);var n=Backbone.View.extend({className:"track-header",initialize:function(){this.model.config.get("name").on("change:value",this.update_name,this),this.render()},render:function(){this.$el.append($("<div/>").addClass(this.model.drag_handle_class)),this.$el.append($("<div/>").addClass("track-name").text(this.model.config.get_value("name"))),this.action_icons={},this.render_action_icons(),this.$el.dblclick(function(e){e.stopPropagation()}),this.$el.append($("<div style='clear: both'/>"))},update_name:function(){this.$el.find(".track-name").text(this.model.config.get_value("name"))},render_action_icons:function(){var t=this;this.icons_div=$("<div/>").addClass("track-icons").hide().appendTo(this.$el),i.each(this.model.action_icons_def,function(e){t.add_action_icon(e.name,e.title,e.css_class,e.on_click_fn,e.prepend,e.hide)}),this.set_display_modes(this.model.display_modes)},add_action_icon:function(e,t,i,n,o,s){var a=this;this.action_icons[e]=$("<a/>").attr("title",t).addClass("icon-button").addClass(i).tooltip().click(function(){n(a.model)}).appendTo(this.icons_div),s&&this.action_icons[e].hide()},set_display_modes:function(e,t){if(e){this.model.display_modes=e,this.model.mode=t||this.model.config.get_value("mode")||this.model.display_modes[0],this.action_icons.mode_icon.attr("title","Set display mode (now: ".concat(this.mode,")"));for(var i=this.model,n={},o=0,s=i.display_modes.length;o<s;o++){var a=i.display_modes[o];n[a]=function(e){return function(){i.change_mode(e)}}(a)}make_popupmenu(this.action_icons.mode_icon,n)}}});e.default={TrackHeaderView:n}});