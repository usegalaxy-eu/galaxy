define(["exports","jquery","onload/loadConfig","viz/visualization","libs/bbi/bigwig"],function(e,t,d,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=i(t),n=i(a),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};r.get||r.set?Object.defineProperty(t,a,r):t[a]=e[a]}return t.default=e,t}}(r);function i(e){return e&&e.__esModule?e:{default:e}}var o=n.default.GenomeDataManager.extend({load_data:function(n,e,t,a){var i=u.default.Deferred();this.set_data(n,i);var r="".concat((0,d.getAppRoot)(),"datasets/").concat(this.get("dataset").id,"/display"),o=this;new u.default.Deferred;return u.default.when(s.makeBwg(r)).then(function(e,t){u.default.when(e.readWigData(n.get("chrom"),n.get("start"),n.get("end"))).then(function(e){var t=[],a={max:Number.MIN_VALUE};e.forEach(function(e){a.max!==e.min-1&&(t.push([a.max+1,0]),t.push([e.min-2,0])),t.push([e.min-1,e.score]),t.push([e.max,e.score]),a=e});var r={data:t,region:n,dataset_type:"bigwig"};o.set_data(n,r),i.resolve(r)})}),i}});e.default={BBIDataManager:o}});