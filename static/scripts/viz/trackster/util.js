define(["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Backbone.Model.extend({defaults:{ajax_settings:{},interval:1e3,success_fn:function(e){return!0}},go:function(){var n=$.Deferred(),e=this,r=e.get("ajax_settings"),a=e.get("success_fn"),o=e.get("interval");return function t(){$.ajax(r).success(function(e){a(e)?n.resolve(e):setTimeout(t,o)})}(),n}});e.default={commatize:function(e){e+="";for(var t=/(\d+)(\d{3})/;t.test(e);)e=e.replace(t,"$1,$2");return e},is_deferred:function(e){return"promise"in e},ServerStateDeferred:t,get_random_color:function(e){e||(e="#ffffff"),"string"==typeof e&&(e=[e]);for(var t=0;t<e.length;t++)e[t]=parseInt(e[t].slice(1),16);var n,r,a,o,i,s,f,u,c,d,l,h,m,g,M,v,_,x=function(e,t,n){return(299*e+587*t+114*n)/1e3},p=!1,b=0;do{for(c=x(r=(16711680&(n=Math.round(16777215*Math.random())))>>16,a=(65280&n)>>8,o=255&n),p=!0,t=0;t<e.length;t++)if(d=x(s=(16711680&(i=e[t]))>>16,f=(65280&i)>>8,u=255&i),h=r,m=a,g=o,M=s,v=f,_=u,l=Math.max(h,M)-Math.min(h,M)+(Math.max(m,v)-Math.min(m,v))+(Math.max(g,_)-Math.min(g,_)),Math.abs(c-d)<40||l<200){p=!1;break}b++}while(!p&&b<=10);return"#".concat((16777216+n).toString(16).substr(1,6))}}});