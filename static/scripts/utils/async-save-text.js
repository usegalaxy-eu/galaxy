define(["exports","jquery"],function(e,t){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0});var s=((i=t)&&i.__esModule?i:{default:i}).default;e.default=function(e,a,n,o,t,u,c,f,l){void 0===t&&(t=30),void 0===c&&(c=4),s("#".concat(e)).off().click(function(){if(!(0<s("#renaming-active").length)){var i,r=s("#".concat(a)),e=r.text();(i=u?s("<textarea></textarea>").attr({rows:c,cols:t}).text(s.trim(e)):s("<input type='text'></input>").attr({value:s.trim(e),size:t})).attr("id","renaming-active"),i.blur(function(){s(this).remove(),r.show(),l&&l(i)}),i.keyup(function(e){if(27===e.keyCode)s(this).trigger("blur");else if(13===e.keyCode){var t={};t[o]=s(this).val(),s(this).trigger("blur"),s.ajax({url:n,data:t,error:function(){alert("Text editing for elt ".concat(a," failed"))},success:function(e){""!==e?r.text(e):r.html("<em>None</em>"),l&&l(i)}})}}),f&&f(i),r.hide(),i.insertAfter(r),i.focus(),i.select()}})}});