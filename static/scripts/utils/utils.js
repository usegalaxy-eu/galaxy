define(["exports","underscore","jquery","onload/loadConfig","app","utils/localization"],function(t,e,n,r,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iframe=l,t.deepeach=d,t.linkify=p,t.clone=_,t.isJSON=g,t.sanitize=y,t.isEmpty=h,t.textify=v,t.get=b,t.request=m,t.cssGetAttribute=S,t.cssLoadFile=x,t.merge=T,t.roundToDecimalPlaces=w,t.bytesToString=j,t.uid=k,t.time=G,t.appendScriptStyle=J,t.getQueryString=M,t.setWindowTitle=N,t.generateTagStyle=I;var o=s(e),i=s(n),u=s(c);function s(t){return t&&t.__esModule?t:{default:t}}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=t[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,c=t}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(t){return'<iframe src="'.concat(t,'" frameborder="0" style="width: 100%; height: 100%;"/>')}function d(t,e){for(var n in t){var r=t[n];if(o.default.isObject(r)){var a=e(r);a&&(t[n]=a),d(r,e)}}}function p(t){var e,n,r;return e=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,n=/(^|[^\/])(www\.[\S]+(\b|$))/gim,r=/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim,t.replace(e,'<a href="$1" target="_blank">$1</a>').replace(n,'$1<a href="http://$2" target="_blank">$2</a>').replace(r,'<a href="mailto:$1">$1</a>')}function _(t){return JSON.parse(JSON.stringify(t)||null)}function g(t){return/^[\],:{}\s]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))}function y(t){return(0,i.default)("<div/>").text(t).html()}function h(t){if(t instanceof Array||(t=[t]),0===t.length)return!0;for(var e in t)if(-1<["__null__","__undefined__",null,void 0].indexOf(t[e]))return!0;return!1}function v(t){if(i.default.isArray(t)){var e=(t=t.toString().replace(/,/g,", ")).lastIndexOf(", ");return-1!=e&&(t="".concat(t.substr(0,e)," or ").concat(t.substr(e+2))),t}return""}function b(n){top.__utils__get__=top.__utils__get__||{};var e=JSON.stringify(n);n.cache&&top.__utils__get__[e]?(n.success&&n.success(top.__utils__get__[e]),window.console.debug("utils.js::get() - Fetching from cache [".concat(n.url,"]."))):m({url:n.url,data:n.data,success:function(t){top.__utils__get__[e]=t,n.success&&n.success(t)},error:function(t,e){n.error&&n.error(t,e)}})}function m(r){var t={contentType:"application/json",type:r.type||"GET",data:r.data||{},url:r.url};"GET"==t.type||"DELETE"==t.type?(i.default.isEmptyObject(t.data)||(t.url+=-1==t.url.indexOf("?")?"?":"&",t.url+=i.default.param(t.data,!0)),t.data=null):(t.dataType="json",t.url=t.url,t.data=JSON.stringify(t.data)),i.default.ajax(t).done(function(t){if("string"==typeof t)try{t=t.replace("Infinity,",'"Infinity",'),t=i.default.parseJSON(t)}catch(t){console.debug(t)}r.success&&r.success(t)}).fail(function(e){var n=null;try{n=i.default.parseJSON(e.responseText)}catch(t){n=e.responseText}r.error&&r.error(n,e.status)}).always(function(){r.complete&&r.complete()})}function S(t,e){var n=(0,i.default)('<div class="'.concat(t,'"></div>'));n.appendTo(":eq(0)");var r=n.css(e);return n.remove(),r}function x(t){(0,i.default)('link[href^="'.concat(t,'"]')).length||(0,i.default)('<link href="'.concat((0,r.getAppRoot)()).concat(t,'" rel="stylesheet">')).appendTo("head")}function T(t,e){return t?o.default.defaults(t,e):e}function w(t,e){for(var n=1,r=0;r<e;r++)n*=10;return Math.round(t*n)/n}var O=1024,A=O*O,$=A*O,E=$*O;function j(t,e,n){n=void 0!==n?n:1;var r="";if(E<=t)t/=E,r="TB";else if($<=t)t/=$,r="GB";else if(A<=t)t/=A,r="MB";else if(O<=t)t/=O,r="KB";else{if(!(0<t))return e?"0 b":"<strong>-</strong>";r="b"}var a="b"==r?t:w(t,n);return e?"".concat(a," ").concat(r):"<strong>".concat(a,"</strong> ").concat(r)}function k(){return top.__utils__uid__=top.__utils__uid__||0,"uid-".concat(top.__utils__uid__++)}function G(){var t=new Date,e=(t.getHours()<10?"0":"")+t.getHours(),n=(t.getMinutes()<10?"0":"")+t.getMinutes();return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear(),", ").concat(e,":").concat(n)}function J(t){t.script&&""!==t.script&&(0,i.default)("<script/>",{type:"text/javascript"}).text(t.script).appendTo("head"),t.styles&&""!==t.styles&&(0,i.default)("<style/>",{type:"text/css"}).text(t.styles).appendTo("head")}function M(t){return decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]".concat(encodeURIComponent(t).replace(/[\.\+\*]/g,"\\$&"),"(?:\\=([^&]*))?)?.*$"),"i"),"$1"))}function N(t){var e=(0,a.getGalaxyInstance)();window.document.title=t?"Galaxy ".concat(e.config.brand?" | ".concat(e.config.brand):""," | ").concat((0,u.default)(t)):"Galaxy ".concat(e.config.brand?" | ".concat(e.config.brand):"")}function I(t){var e=function(t){var e,n,r=2166136261;for(e=0,n=t.length;e<n;e++)r^=t.charCodeAt(e),r+=(r<<1)+(r<<4)+(r<<7)+(r<<8)+(r<<24);return r>>>0}(t),n=Math.abs((e>>4)%360),r=75+(15&e),a="hsl(".concat(n,", 100%, ").concat(r,"%)"),c="hsl(".concat(n,", 100%, ").concat(r-40,"%)"),o=f(function(t,e,n){var r,a,c;if(0==e)r=a=c=n;else{var o=function(t,e,n){return n<0&&(n+=1),1<n&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},i=n<.5?n*(1+e):n+e-n*e,u=2*n-i;r=o(u,i,t+1/3),a=o(u,i,t),c=o(u,i,t-1/3)}return[r,a,c]}(n,1,r/100),3),i=o[0],u=o[1],s=o[2],l=125<(255*i*299+255*u*587+255*s*114)/1e3?"black":"white";return"background-color: ".concat(a,"; color: ").concat(l,"; border: 1px solid ").concat(c)}t.default={cssLoadFile:x,cssGetAttribute:S,get:b,merge:T,iframe:l,bytesToString:j,uid:k,time:G,request:m,sanitize:y,textify:v,isEmpty:h,deepeach:d,isJSON:g,clone:_,linkify:p,appendScriptStyle:J,getQueryString:M,setWindowTitle:N,generateTagStyle:I}});