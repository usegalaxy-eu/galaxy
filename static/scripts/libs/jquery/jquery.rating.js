window.jQuery&&function(u){if(!u.support.opacity&&!u.support.style)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}u.fn.rating=function(h){if(0==this.length)return this;if("string"==typeof h){if(1<this.length){var t=arguments;return this.each(function(){u.fn.rating.apply(u(this),t)})}return u.fn.rating[h].apply(this,u.makeArray(arguments).slice(1)||[]),this}h=u.extend({},u.fn.rating.options,h||{});return u.fn.rating.calls++,this.not(".star-rating-applied").addClass("star-rating-applied").each(function(){var t,a=u(this),i=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,""),r=u(this.form||document.body),n=r.data("rating");n&&n.call==u.fn.rating.calls||(n={count:0,call:u.fn.rating.calls});var s=n[i]||r.data("rating"+i);s&&(t=s.data("rating")),s&&t?t.count++:((t=u.extend({},h||{},(u.metadata?a.metadata():u.meta?a.data():null)||{},{count:0,stars:[],inputs:[]})).serial=n.count++,s=u('<span class="star-rating-control"/>'),a.before(s),s.addClass("rating-to-be-drawn"),(a.attr("disabled")||a.hasClass("disabled"))&&(t.readOnly=!0),a.hasClass("required")&&(t.required=!0),s.append(t.cancel=u('<div class="rating-cancel"><a title="'+t.cancel+'">'+t.cancelValue+"</a></div>").on("mouseover",function(){u(this).rating("drain"),u(this).addClass("star-rating-hover")}).on("mouseout",function(){u(this).rating("draw"),u(this).removeClass("star-rating-hover")}).on("click",function(){u(this).rating("select")}).data("rating",t)));var e=u('<div role="text" aria-label="'+this.title+'" class="star-rating rater-'+t.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");if(s.append(e),this.id&&e.attr("id",this.id),this.className&&e.addClass(this.className),t.half&&(t.split=2),"number"==typeof t.split&&0<t.split){var l=(u.fn.width?e.width():0)||t.starWidth,d=t.count%t.split,c=Math.floor(l/t.split);e.width(c).find("a").css({"margin-left":"-"+d*c+"px"})}t.readOnly?e.addClass("star-rating-readonly"):e.addClass("star-rating-live").on("mouseover",function(){u(this).rating("fill"),u(this).rating("focus")}).on("mouseout",function(){u(this).rating("draw"),u(this).rating("blur")}).on("click",function(){u(this).rating("select")}),this.checked&&(t.current=e),"A"==this.nodeName&&u(this).hasClass("selected")&&(t.current=e),a.hide(),a.on("change.rating",function(t){if(t.selfTriggered)return!1;u(this).rating("select")}),e.data("rating.input",a.data("rating.star",e)),t.stars[t.stars.length]=e[0],t.inputs[t.inputs.length]=a[0],t.rater=n[i]=s,t.context=r,a.data("rating",t),s.data("rating",t),e.data("rating",t),r.data("rating",n),r.data("rating"+i,s)}),u(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn"),this},u.extend(u.fn.rating,{calls:0,focus:function(){var t=this.data("rating");if(!t)return this;if(!t.focus)return this;var a=u(this).data("rating.input")||u("INPUT"==this.tagName?this:null);t.focus&&t.focus.apply(a[0],[a.val(),u("a",a.data("rating.star"))[0]])},blur:function(){var t=this.data("rating");if(!t)return this;if(!t.blur)return this;var a=u(this).data("rating.input")||u("INPUT"==this.tagName?this:null);t.blur&&t.blur.apply(a[0],[a.val(),u("a",a.data("rating.star"))[0]])},fill:function(){var t=this.data("rating");if(!t)return this;t.readOnly||(this.rating("drain"),this.prevAll().addBack().filter(".rater-"+t.serial).addClass("star-rating-hover"))},drain:function(){var t=this.data("rating");if(!t)return this;t.readOnly||t.rater.children().filter(".rater-"+t.serial).removeClass("star-rating-on").removeClass("star-rating-hover")},draw:function(){var t=this.data("rating");if(!t)return this;this.rating("drain");var a=u(t.current),i=a.length?a.prevAll().addBack().filter(".rater-"+t.serial):null;i&&i.addClass("star-rating-on"),t.cancel[t.readOnly||t.required?"hide":"show"](),this.siblings()[t.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(t,a){var i=this.data("rating");if(!i)return this;if(!i.readOnly){if(i.current=null,void 0!==t||1<this.length){if("number"==typeof t)return u(i.stars[t]).rating("select",void 0,a);if("string"==typeof t)return u.each(i.stars,function(){u(this).data("rating.input").val()==t&&u(this).rating("select",void 0,a)}),this}else i.current="INPUT"==this[0].tagName?this.data("rating.star"):this.is(".rater-"+i.serial)?this:null;this.data("rating",i),this.rating("draw");var r=u(i.current?i.current.data("rating.input"):null),n=u(i.inputs).filter(":checked");return u(i.inputs).not(r).prop("checked",!1),r.prop("checked",!0),u(r.length?r:n).trigger({type:"change",selfTriggered:!0}),(a||null==a)&&i.callback&&i.callback.apply(r[0],[r.val(),u("a",i.current)[0]]),this}},readOnly:function(t,a){var i=this.data("rating");if(!i)return this;i.readOnly=!(!t&&null!=t),a?u(i.inputs).attr("disabled","disabled"):u(i.inputs).removeAttr("disabled"),this.data("rating",i),this.rating("draw")},disable:function(){this.rating("readOnly",!0,!0)},enable:function(){this.rating("readOnly",!1,!1)}}),u.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16},u(function(){u("input[type=radio].star").rating()})}(jQuery);