define(["exports","jquery","backbone","onload/loadConfig","app","utils/deferred","mvc/ui/ui-modal","mvc/ui/ui-misc","mvc/visualization/chart/components/model","mvc/visualization/chart/views/editor","mvc/visualization/chart/views/viewer","mvc/visualization/chart/views/menu"],function(t,e,a,i,s,n,d,r,l,h,u,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=b(e),p=b(a),f=b(n),v=b(d),m=b(r),g=b(l),w=b(h),$=b(u),_=b(o);function b(t){return t&&t.__esModule?t:{default:t}}t.default=p.default.View.extend({initialize:function(t){var a=this,e=(0,s.getGalaxyInstance)();this.modal=e&&e.modal?e.modal:new v.default.View,this.setElement((0,c.default)("<div/>").addClass("charts-client").append((0,c.default)("<div/>").addClass("charts-buttons")).append((0,c.default)("<div/>").addClass("charts-center")).append((0,c.default)("<div/>").addClass("charts-right"))),this.$center=this.$(".charts-center"),this.$right=this.$(".charts-right"),this.$buttons=this.$(".charts-buttons"),this.chart=new g.default({},t),this.chart.plugin=t.visualization_plugin,this.chart.plugin.specs=this.chart.plugin.specs||{},this.chart_load=t.chart_load,this.message=new m.default.Message,this.deferred=new f.default,this.viewer=new $.default(this),this.editor=new w.default(this),this.menu=new _.default(this),this.$center.append(this.viewer.$el),this.$right.append(this.message.$el).append(this.editor.$el),this.$buttons.append(this.menu.$el),c.default.ajax({url:"".concat((0,i.getAppRoot)(),"api/datasets/").concat(t.dataset_id)}).done(function(t){a.dataset=t,a.chart.load(),a.chart.trigger("redraw")}).fail(function(t){var e=t.responseJSON&&t.responseJSON.err_msg;a.errormessage=e||"Import failed for unkown reason."})}})});