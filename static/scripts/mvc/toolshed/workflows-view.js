define(["exports","underscore","jquery","backbone","onload/loadConfig","utils/localization","mvc/toolshed/toolshed-model","mvc/toolshed/util"],function(t,o,e,l,d,a,s,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=h(o),n=h(e),w=h(l),f=h(a),c=h(s),u=h(r);function h(t){return t&&t.__esModule?t:{default:t}}var p=w.default.View.extend({el:"#center",defaults:[{}],initialize:function(t){this.model=new c.default.WorkflowTools,this.listenTo(this.model,"sync",this.render),this.model.fetch(),this.render()},render:function(t){var o=this.templateWorkflows,e=this.model.models;this.$el.html(o({title:(0,f.default)("Workflows Missing Tools"),workflows:e,queue:u.default.queueLength()})),(0,n.default)("#center").css("overflow","auto"),this.bindEvents()},bindEvents:function(){var r;(0,n.default)(".show_wf_repo").on("click",function(t){var o=(0,n.default)(t.target).attr("data-toolids"),e=(0,n.default)(t.target).attr("data-shed"),l="".concat((0,d.getAppRoot)(),"api/tool_shed/repository"),a={tool_ids:o};n.default.get(l,a,function(t){r=t.repository.id;var o="repository/s/".concat(e.replace(/:/g,"%3a").replace(/\//g,"%2f"),"/r/").concat(t.repository.id);w.default.history.navigate(o,{trigger:!0,replace:!0})})}),(0,n.default)(".queue_wf_repo").on("click",function(t){var l=(0,n.default)(t.target),o=l.attr("data-toolids"),a=l.attr("data-shed"),e="".concat((0,d.getAppRoot)(),"api/tool_shed/repository"),s={tool_ids:o};n.default.get(e,s,function(t){r=t.repository.id,s={tool_shed_url:a,repository_id:r},n.default.get(e,s,function(t){var o=Object.keys(t.repository.metadata)[0],e=t.repository.metadata[o];e.tool_shed_url=a,u.default.addToQueue(e),l.remove()})})}),(0,n.default)("#from_workflow").on("click",this.loadWorkflows)},templateWorkflows:i.default.template(['<div class="unified-panel-header" id="panel_header" unselectable="on">','<div class="unified-panel-header-inner"><%= title %><a class="ml-auto" href="#/queue">Repository Queue (<%= queue %>)</a></div>',"</div>",'<style type="text/css">',".workflow_names, .workflow_tools { list-style-type: none; } ul.workflow_tools, ul.workflow_names {  padding-left: 0px; }","</style>",'<table id="workflows_missing_tools" class="grid" border="0" cellpadding="2" cellspacing="2" width="100%">','<thead id="grid-table-header">',"<tr>",'<th class="datasetRow">Workflows</th>','<th class="datasetRow">Tool IDs</th>','<th class="datasetRow">Shed</th>','<th class="datasetRow">Name</th>','<th class="datasetRow">Owner</th>','<th class="datasetRow">Actions</th>',"</tr>","</thead>","<tbody>","<% _.each(workflows, function(workflow) { %>","<tr>",'<td class="datasetRow">','<ul class="workflow_names">','<% _.each(workflow.get("workflows"), function(name) { %>','<li class="workflow_names"><%= name %></li>',"<% }); %>","</ul>","</td>",'<td class="datasetRow">','<ul class="workflow_tools">','<% _.each(workflow.get("tools"), function(tool) { %>','<li class="workflow_tools"><%= tool %></li>',"<% }); %>","</ul>","</td>",'<td class="datasetRow"><%= workflow.get("shed") %></td>','<td class="datasetRow"><%= workflow.get("repository") %></td>','<td class="datasetRow"><%= workflow.get("owner") %></td>','<td class="datasetRow">','<ul class="workflow_tools">','<li class="workflow_tools">','<input type="button" class="show_wf_repo btn btn-primary" data-shed="<%= workflow.get("shed") %>" data-owner="<%= workflow.get("owner") %>" data-repo="<%= workflow.get("repository") %>" data-toolids="<%= workflow.get("tools").join(",") %>" value="Show Repository" /></li>',"</ul>","</td>","</tr>","<% }); %>","</ul>","</div>"].join(""))});t.default={Workflows:p}});