define(["exports","backbone","onload/loadConfig","app","mvc/library/library-util"],function(e,t,o,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(t),l=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var d=i.default.Model.extend({urlRoot:"".concat((0,o.getAppRoot)(),"api/libraries/"),isVisible:function(e){var t=!0;return!e&&this.get("deleted")&&(t=!1),t}}),s=i.default.Collection.extend({urlRoot:"".concat((0,o.getAppRoot)(),"api/libraries"),model:d,initialize:function(e){e=e||{}},search:function(e){if(""==e)return this;var t=e.toLowerCase();return this.filter(function(e){return-1!==e.get("name").toLowerCase().indexOf(t)})},getVisible:function(t,e){return e=e||[],new s(this.filter(function(e){return e.isVisible(t)}))},sortLibraries:function(e,t){this.comparator=l.default.generateLibraryComparator(e,t),this.sort()}}),u=i.default.Model.extend({}),c=u.extend({urlRoot:"".concat((0,o.getAppRoot)(),"api/libraries/datasets/")}),f=u.extend({urlRoot:"".concat((0,o.getAppRoot)(),"api/folders/")}),p=i.default.Collection.extend({model:u,sortFolder:function(e,t){this.comparator=l.default.generateFolderComparator(e,t),this.sort()}}),g=i.default.Model.extend({defaults:{folder:new p,urlRoot:"".concat((0,o.getAppRoot)(),"api/folders/"),id:"unknown"},parse:function(e){var t=(0,n.getGalaxyInstance)();this.get("folder").reset();for(var o=0;o<e.folder_contents.length;o++)if("folder"===e.folder_contents[o].type){var r=new f(e.folder_contents[o]);this.get("folder").add(r)}else if("file"===e.folder_contents[o].type){var i=new c(e.folder_contents[o]);this.get("folder").add(i)}else t.emit.error("Unknown folder item type encountered while parsing response.");return e}}),h=i.default.Model.extend({urlRoot:"".concat((0,o.getAppRoot)(),"api/histories/")}),R=i.default.Collection.extend({urlRoot:"".concat((0,o.getAppRoot)(),"api/histories/"),initialize:function(e){this.id=e.id},url:function(){return"".concat(this.urlRoot+this.id,"/contents")},model:h}),x=i.default.Model.extend({urlRoot:"".concat((0,o.getAppRoot)(),"api/histories/")}),b=i.default.Collection.extend({url:"".concat((0,o.getAppRoot)(),"api/histories"),model:x}),m=i.default.Model.extend({urlRoot:"".concat((0,o.getAppRoot)(),"api/remote_files")});e.default={Library:d,Libraries:s,Item:c,Ldda:c,FolderAsModel:f,Folder:p,FolderContainer:g,HistoryItem:h,HistoryContents:R,GalaxyHistory:x,GalaxyHistories:b,Jstree:m}});