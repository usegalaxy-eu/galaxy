define(["exports","app","mvc/collection/collection-view","mvc/collection/collection-model","mvc/collection/collection-li-edit","mvc/base-mvc","mvc/tag","ui/fa-icon-button","utils/localization","ui/editable-text"],function(t,l,e,i,o,n,a,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=m(e),r=(m(i),m(o)),u=(m(n),m(a)),f=(m(s),m(d));function m(t){return t&&t.__esModule?t:{default:t}}var C=c.default.CollectionView,h=C.extend({DatasetDCEViewClass:r.default.DatasetDCEListItemEdit,NestedDCDCEViewClass:r.default.NestedDCDCEListItemEdit,getNestedDCDCEViewClass:function(){return r.default.NestedDCDCEListItemEdit.extend({foldoutPanelClass:h})},initialize:function(t){C.prototype.initialize.call(this,t)},_setUpBehaviors:function(t){if(t=t||this.$el,C.prototype._setUpBehaviors.call(this,t),this.model){var e=(0,l.getGalaxyInstance)();if(e.user&&!e.user.isAnonymous()){this.tagsEditorShown=!0;var i=this,o="> .controls .name";t.find(o).attr("title",(0,f.default)("Click to rename collection")).tooltip({placement:"bottom"}).make_text_editable({on_finish:function(t){var e=i.model.get("name");t&&t!==e?(i.$el.find(o).text(t),i.model.save({name:t}).fail(function(){i.$el.find(o).text(i.model.previous("name"))})):i.$el.find(o).text(e)}}),this.tagsEditor=new u.default.TagsEditor({model:this.model,el:t.find(".tags-display"),onshowFirstTime:function(){this.render()},usePrompt:!1}),this.tagsEditor.toggle(!0)}}},toString:function(){return"CollectionViewEdit(".concat(this.model?this.model.get("name"):"",")")}});t.default={CollectionViewEdit:h}});