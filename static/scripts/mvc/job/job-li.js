define(["exports","mvc/list/list-item","mvc/dataset/dataset-list","mvc/base-mvc","utils/localization"],function(t,a,e,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(a),n=r(e),o=r(i),d=r(l);function r(t){return t&&t.__esModule?t:{default:t}}var p=s.default.FoldoutListItemView,c=p.extend({className:"".concat(p.prototype.className," job"),id:function(){return["job",this.model.get("id")].join("-")},foldoutPanelClass:n.default.DatasetList,initialize:function(t){t.logger&&(this.logger=this.model.logger=t.logger),this.log("".concat(this,".initialize:"),t),p.prototype.initialize.call(this,t),this.tool=t.tool||{},this.jobData=t.jobData||{},this.linkTarget=t.linkTarget||"_blank"},_swapNewRender:function(t){return p.prototype._swapNewRender.call(this,t),this.model.has("state")&&this.$el.addClass("state-".concat(this.model.get("state"))),this.$el},_getFoldoutPanelOptions:function(){var t=p.prototype._getFoldoutPanelOptions.call(this);return _.extend(t,{collection:this.model.outputCollection,selecting:!1})},_labelParamMap:function(){var a=this.model.get("params"),e={};return _.each(this.tool.inputs,function(t){t.label&&"DataToolParameter"!==t.model_class&&(e[t.label]=a[t.name])}),e},_labelInputMap:function(){var e=this,i={};return _.each(this.jobData.inputs,function(t){var a=e._findToolInput(t.name);a&&(i[a.label]=t)}),i},_findToolInput:function(t){var a=this.tool.inputs,e=_.findWhere(a,{name:t});return e||this._findRepeatToolInput(t,a)},_findRepeatToolInput:function(a,t){t=t||this.tool.inputs;var e=_.find(t,function(t){return 0===a.indexOf(t.name)});if(e)return _.find(e.inputs,function(t){return-1!==a.indexOf(t.name)})},toString:function(){return"JobListItemView(".concat(this.model,")")}});c.prototype.templates=function(){o.default.wrapTemplate(['<div class="list-element">','<div class="id"><%- model.id %></div>','<div class="warnings"></div>','<div class="selector">','<span class="fa fa-2x fa-square-o"></span>',"</div>",'<div class="primary-actions"></div>','<div class="title-bar"></div>','<div class="details"></div>',"</div>"]);var t=o.default.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- view.tool.name %></span>',"</div>",'<div class="subtitle">','<span class="description"><%- view.tool.description %></span','<span class="create-time">'," ",(0,d.default)("Created"),": <%= new Date( job.create_time ).toString() %>, ","</span","</div>","</div>"],"job"),a=o.default.wrapTemplate(['<div class="subtitle">','<span class="description"><%- view.tool.description %></span',"</div>"],"job"),e=o.default.wrapTemplate(['<div class="details">','<div class="params">',"<% _.each( view._labelInputMap(), function( input, label ){ %>",'<div class="input" data-input-name="<%- input.name %>" data-input-id="<%- input.id %>">','<label class="prompt"><%- label %></label>','<span class="value"><%- input.content.name %></span>',"</div>","<% }) %>","<% _.each( view._labelParamMap(), function( param, label ){ %>",'<div class="param" data-input-name="<%- param.name %>">','<label class="prompt"><%- label %></label>','<span class="value"><%- param %></span>',"</div>","<% }) %>","</div>","</div>"],"job");return _.extend({},p.prototype.templates,{titleBar:t,subtitle:a,details:e})}(),t.default={JobListItemView:c}});