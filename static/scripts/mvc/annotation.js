define(["exports","mvc/base-mvc","utils/localization","ui/editable-text"],function(t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=a(n),o=a(i);function a(t){return t&&t.__esModule?t:{default:t}}var l=Backbone.View.extend(e.default.LoggableMixin).extend(e.default.HiddenUntilActivatedViewMixin).extend({tagName:"div",className:"annotation-display",initialize:function(t){t=t||{},this.tooltipConfig=t.tooltipConfig||{placement:"bottom"},this.listenTo(this.model,"change:annotation",function(){this.render()}),this.hiddenUntilActivated(t.$activator,t)},render:function(){var n=this;return this.$el.html(this._template()),this.$annotation().make_text_editable({use_textarea:!0,on_finish:function(t){n.$annotation().text(t),n.model.save({annotation:t},{silent:!0}).fail(function(){n.$annotation().text(n.model.previous("annotation"))})}}),this},_template:function(){var t=this.model.get("annotation");return['<label class="prompt">',(0,o.default)("Annotation"),"</label>",'<div class="annotation">',_.escape(t),"</div>"].join("")},$annotation:function(){return this.$el.find(".annotation")},remove:function(){this.$annotation.off(),this.stopListening(this.model),Backbone.View.prototype.remove.call(this)},toString:function(){return["AnnotationEditor(","".concat(this.model),")"].join("")}});t.default={AnnotationEditor:l}});