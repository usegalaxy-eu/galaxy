define(["exports","utils/utils"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n=(i=t)&&i.__esModule?i:{default:i};var s=Backbone.View.extend({initialize:function(e){var i=this;this.model=e&&e.model||new Backbone.Model({id:n.default.uid(),min:null,max:null,step:null,precise:!1,split:1e4,value:null,onchange:function(){}}).set(e),this.setElement(this._template()),this.$el.attr("id",this.model.id),this.$text=this.$(".ui-form-slider-text"),this.$slider=this.$(".ui-form-slider-element");var s=[];this.$text.on("change",function(){i.value($(this).val())}).on("keyup",function(e){s[e.which]=!1}).on("keydown",function(e){var t=e.which;s[t]=!0,i.model.get("is_workflow")&&s[16]&&52==t?(i.value("$"),event.preventDefault()):8==t||9==t||13==t||37==t||39==t||48<=t&&t<=57||96<=t&&t<=105||(190==t||110==t)&&-1==$(this).val().indexOf(".")&&i.model.get("precise")||(189==t||109==t)&&-1==$(this).val().indexOf("-")||i._isParameter($(this).val())||s[91]||s[17]||event.preventDefault()});var t=this.model.attributes;this.has_slider=null!==t.max&&null!==t.min&&t.max>t.min;var l=t.step;l||(l=t.precise&&this.has_slider?(t.max-t.min)/t.split:1),this.has_slider&&this.$slider.slider({min:t.min,max:t.max,step:l}).on("slide",function(e,t){i.value(t.value)}),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var e=this.model.get("value");this.has_slider?(this.$slider.slider("value",e),this.$slider.show(),this.$text.addClass("col-3 mr-3")):(this.$slider.hide(),this.$text.removeClass("col-3 mr-3")),e!==this.$text.val()&&this.$text.val(e)},value:function(e){if(void 0!==e){var t=this.model.attributes,i=e,s=null!==e&&""!==e&&!this._isParameter(e);s&&(isNaN(e)&&(e=0),t.precise||(e=Math.round(e)),null===t.max||isNaN(t.max)||(e=Math.min(e,t.max)),null===t.min||isNaN(t.min)||(e=Math.max(e,t.min))),this.model.set("value",e),this.model.trigger("change"),t.onchange(e);var l=s&&parseInt(i)!==parseInt(e)?"This value was invalid or out-of-range. It has been auto-corrected.":null;this.model.trigger("error",l)}return this.model.get("value")},_isParameter:function(e){return this.model.get("is_workflow")&&"$"===String(e).substring(0,1)},_template:function(){return'<div class="ui-form-slider container-fluid">\n                    <div class="row">\n                        <input class="ui-input ui-form-slider-text" type="text"/>\n                        <div class="ui-form-slider-element col mt-1"/>\n                    </div>\n                </div>'}});e.default={View:s}});