define(["exports","utils/utils","mvc/ui/ui-misc"],function(t,e,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var o=l(e),s=l(i);function l(t){return t&&t.__esModule?t:{default:t}}var n=t.View=Backbone.View.extend({visible:!1,initialize:function(t){var e=this;this.model=t&&t.model||new Backbone.Model({id:o.default.uid(),cls:"ui-portlet",title:"",icon:"",buttons:null,body:null,scrollable:!0,operations:null,collapsible:!1,collapsible_button:!0,collapsed:!1,onchange_title:null}).set(t),this.setElement(this._template()),this.$body=this.$(".portlet-body"),this.$title=this.$(".portlet-title"),this.$title_text=this.$(".portlet-title-text"),this.$title_icon=this.$(".portlet-title-icon"),this.$header=this.$(".portlet-header"),this.$content=this.$(".portlet-content"),this.$backdrop=this.$(".portlet-backdrop"),this.$buttons=this.$(".portlet-buttons"),this.$operations=this.$(".portlet-operations"),this.model.get("body")&&this.append(this.model.get("body")),this.collapsible_button=new s.default.Button({icon:"fa-eye",tooltip:"Collapse/Expand",cls:"ui-button-icon-plain",onclick:function(){e[e.collapsed?"expand":"collapse"]()}}),this.render()},render:function(){var i=this,e=this.model.attributes;return this.$el.removeClass().addClass(e.cls).attr("id",e.id),this.$header[e.title?"show":"hide"](),this.$title_text.html(e.title),e.title_id&&this.$title.attr("id",e.title_id),e.icon?this.$title_icon.removeClass().addClass("portlet-title-icon fa mr-1").addClass(e.icon).show():this.$title_icon.hide(),this.$title_text[e.collapsible?"addClass":"removeClass"]("no-highlight collapsible").off(),e.collapsible&&(this.$title_text.on("click",function(){i[i.collapsed?"expand":"collapse"]()}),e.collapsed?this.collapse():this.expand()),this.$title_text.prop("disabled",!e.onchange_title),e.onchange_title&&this.$title_text.make_text_editable({on_finish:function(t){e.onchange_title(t)}}),e.buttons?(this.$buttons.empty().show(),$.each(this.model.get("buttons"),function(t,e){e.$el.prop("id",t),i.$buttons.append(e.$el)})):this.$buttons.hide(),this.$operations.empty,e.collapsible&&e.collapsible_button&&this.$operations.append(this.collapsible_button.$el),e.operations&&$.each(e.operations,function(t,e){e.$el.prop("id",t),i.$operations.append(e.$el)}),this},append:function(t){this.$body.append(t)},empty:function(){this.$body.empty()},header:function(){return this.$header},body:function(){return this.$body},show:function(){this.visible=!0,this.$el.fadeIn("fast")},hide:function(){this.visible=!1,this.$el.hide()},enableButton:function(t){this.$buttons.find("#".concat(t)).prop("disabled",!1)},disableButton:function(t){this.$buttons.find("#".concat(t)).prop("disabled",!0)},hideOperation:function(t){this.$operations.find("#".concat(t)).hide()},showOperation:function(t){this.$operations.find("#".concat(t)).show()},setOperation:function(t,e){this.$operations.find("#".concat(t)).off("click").on("click",e)},title:function(t){return t&&this.$title_text.html(t),this.$title_text.html()},collapse:function(){this.collapsed=!0,this.$content.hide(),this.collapsible_button.setIcon("fa-eye-slash")},expand:function(){this.collapsed=!1,this.$content.show(),this.collapsible_button.setIcon("fa-eye")},disable:function(){this.$backdrop.show()},enable:function(){this.$backdrop.hide()},_template:function(){return $("<div/>").append($("<div/>").addClass("portlet-header").append($("<div/>").addClass("portlet-operations")).append($("<div/>").addClass("portlet-title").append($("<i/>").addClass("portlet-title-icon")).append($("<span/>").addClass("portlet-title-text")))).append($("<div/>").addClass("portlet-content").append($("<div/>").addClass("portlet-body")).append($("<div/>").addClass("portlet-buttons mt-3 mb-3"))).append($("<div/>").addClass("portlet-backdrop"))}});t.default={View:n}});