define(["exports","underscore","jquery","utils/localization","app"],function(e,t,a,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(t),u=n(a),f=n(o);function n(e){return e&&e.__esModule?e:{default:e}}var c=(0,f.default)("Please contact a Galaxy administrator if the problem persists."),m=(0,f.default)("An error occurred while updating information with the server."),g=(0,f.default)("The following information can assist the developers in finding the source of the error:");function p(e,t,a){if(e){var o,n,r,l,d=(0,i.getGalaxyInstance)();if(e=(0,f.default)(e),t=(0,f.default)(t)||(0,f.default)("Error:"),d&&d.modal)return o=e,n=t,r=a,(l=(0,i.getGalaxyInstance)()).modal.show({title:n,body:o,closing_events:!0,buttons:{Ok:function(){l.modal.hide()}}}),l.modal.$el.addClass("error-modal"),r&&(l.modal.$(".error-details").add(l.modal.$('button:contains("Details")')).remove(),(0,u.default)("<div/>").addClass("error-details").hide().appendTo(l.modal.$(".modal-content")).append([(0,u.default)("<p/>").text(g),(0,u.default)("<pre/>").text(JSON.stringify(r,null,"  "))]),(0,u.default)('<button id="button-1" class="float-left">'.concat((0,f.default)("Details"),"</button>")).appendTo(l.modal.$(".buttons")).click(function(){l.modal.$(".error-details").toggle()})),l.modal;alert("".concat(t,"\n\n").concat(e)),console.log("error details:",JSON.stringify(a))}}e.default={errorModal:p,offlineErrorModal:function(){return p((0,f.default)("You appear to be offline. Please check your connection and try again."),(0,f.default)("Offline?"))},badGatewayErrorModal:function(){return p("".concat((0,f.default)("Galaxy is currently unreachable. Please try again in a few minutes.")," ").concat(c),(0,f.default)("Cannot connect to Galaxy"))},ajaxErrorModal:function(e,t,a,o,n){var r,l,d,u;return o=o||m,p(o+=" ".concat(c),n=n||(0,f.default)("An error occurred"),(r=e,l=t,d=a,u=(0,i.getGalaxyInstance)(),{raven:s.default.result(window.Raven,"lastEventId"),userAgent:navigator.userAgent,onLine:navigator.onLine,version:s.default.result(u.config,"version_major"),xhr:s.default.omit(l,s.default.functions(l)),options:s.default.omit(d,"xhr"),url:s.default.result(u.lastAjax,"url"),data:s.default.result(u.lastAjax,"data"),model:s.default.result(r,"toJSON","".concat(r)),user:s.default.omit(s.default.result(u.user,"toJSON"),"email")}))}}});