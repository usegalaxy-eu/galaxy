define(["exports","utils/utils","backbone"],function(t,e,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=(s=e)&&s.__esModule?s:{default:s},n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};s.get||s.set?Object.defineProperty(e,i,s):e[i]=t[i]}return e.default=t,e}}(i);var o=n.View.extend({initialize:function(t){this.model=t&&t.model||new n.Model({id:l.default.uid(),title:"",icon:"",cls:"btn btn-secondary",wait:!1,wait_text:"Sending...",wait_cls:"btn btn-info",disabled:!1,percentage:-1,visible:!0}).set(t),this.setElement($("<button/>").attr("type","button").append(this.$icon=$("<i/>")).append(this.$title=$("<span/>")).append(this.$progress=$("<div/>").append(this.$progress_bar=$("<div/>")))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var t=this,e=this.model.attributes;this.$el.removeClass().addClass("ui-button-default").addClass(e.disabled&&"disabled").attr("id",e.id).attr("disabled",e.disabled).css("display",e.visible?"inline-block":"none").off("click").on("click",function(){$(".tooltip").hide(),e.onclick&&!t.disabled&&e.onclick()}).tooltip({title:e.tooltip||"",placement:"bottom"}),this.$progress.addClass("progress").css("display",-1!==e.percentage?"block":"none"),this.$progress_bar.addClass("progress-bar").css({width:"".concat(e.percentage,"%")}),this.$icon.removeClass().addClass("icon fa"),this.$title.removeClass().addClass("title"),e.wait?(this.$el.addClass(e.wait_cls).prop("disabled",!0),this.$icon.addClass("fa-spinner fa-spin mr-1"),this.$title.html(e.wait_text)):(this.$el.addClass(e.cls),this.$icon.addClass(e.icon),e.title&&(this.$title.html(e.title),e.icon&&this.$icon.addClass("mr-1")))},show:function(){this.model.set("visible",!0)},hide:function(){this.model.set("visible",!1)},disable:function(){this.model.set("disabled",!0)},enable:function(){this.model.set("disabled",!1)},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},setIcon:function(t){this.model.set("icon",t)}}),d=o.extend({initialize:function(t){this.model=t&&t.model||new n.Model({id:l.default.uid(),visible:!0,title:"",icon:"",cls:""}).set(t),this.setElement($("<a/>").append(this.$icon=$("<span/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var t=this.model.attributes;this.$el.removeClass().addClass(t.cls).attr({id:t.id,href:t.href||"javascript:void(0)",title:t.title,target:t.target||"_top",disabled:t.disabled}).css("display",t.visible?"inline-block":"none").tooltip({placement:"bottom"}).off("click").on("click",function(){t.onclick&&!t.disabled&&t.onclick()}),this.$icon.removeClass().addClass(t.icon)}}),a=n.View.extend({initialize:function(t){this.model=t&&t.model||new n.Model({id:l.default.uid(),title:"Select/Unselect all",icons:["fa-square-o","fa-minus-square-o","fa-check-square-o"],value:0,visible:!0,onchange:function(){}}).set(t),this.setElement($("<div/>").addClass("mb-2").append(this.$icon=$("<span/>")).append(this.$title=$("<span/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(t){var e=this;t=this.model.attributes;this.$el.addClass("ui-button-check").css("display",t.visible?"inline-block":"none").off("click").on("click",function(){e.model.set("value",0===e.model.get("value")?2:0),t.onclick&&t.onclick()}),this.$title.html(t.title),this.$icon.removeClass().addClass("icon fa mr-1").addClass(t.icons[t.value])},value:function(t,e){return void 0!==t&&(e&&0!==t&&(t=t!==e?1:2),this.model.set("value",t),this.model.get("onchange")(this.model.get("value"))),this.model.get("value")}}),c=n.View.extend({$menu:null,initialize:function(t){this.model=t&&t.model||new n.Model({id:"",title:"",pull:"right",icon:null,onclick:null,cls:"btn btn-secondary float-right",tooltip:"",target:"",href:"",onunload:null,visible:!0,tag:""}).set(t),this.collection=new n.Collection,this.setElement($("<div/>").append(this.$root=$("<button/>").append(this.$icon=$("<i/>")).append(this.$title=$("<span/>")))),this.listenTo(this.model,"change",this.render,this),this.listenTo(this.collection,"change add remove reset",this.render,this),this.render()},render:function(){var s=this,e=this.model.attributes;this.$el.removeClass().addClass("dropdown").attr("id",e.id).css({display:e.visible&&0<this.collection.where({visible:!0}).length?"block":"none"}),this.$root.addClass(e.cls).attr("data-toggle","dropdown").tooltip({title:e.tooltip||"",placement:"bottom"}).off("click").on("click",function(t){$(".tooltip").hide(),t.preventDefault(),e.onclick&&e.onclick()}),this.$icon.removeClass().addClass("icon fa").addClass(e.icon),e.title&&this.$title.removeClass().addClass("title ml-1").html(e.title),this.$menu&&this.$menu.remove(),0<this.collection.length&&(this.$menu=$("<ul/>").addClass("menu dropdown-menu dropdown-menu-right").addClass("pull-".concat(this.model.get("pull"))).attr("role","menu"),this.$el.append(this.$menu)),this.collection.each(function(t){var e=t.attributes;if(e.visible){var i=$("<a/>").addClass("dropdown-item").attr({href:e.href,target:e.target}).append($("<i/>").addClass("fa mr-2").addClass(e.icon).css("display",e.icon?"inline-block":"none")).append(e.title).on("click",function(t){e.onclick&&(t.preventDefault(),e.onclick())});s.$menu.append($("<li/>").append(i)),e.divider&&s.$menu.append($("<li/>").addClass("divider"))}})},addMenu:function(t){this.collection.add(l.default.merge(t,{title:"",target:"",href:"",onclick:null,divider:!1,visible:!0,icon:null,cls:"button-menu btn-group"}))}});t.default={Button:o,ButtonLink:d,ButtonCheck:a,ButtonMenu:c}});