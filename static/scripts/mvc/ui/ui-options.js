define(["exports","backbone","underscore","utils/utils","mvc/ui/ui-buttons"],function(t,e,i,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=d(e),l=d(i),o=u(a),h=u(n);function u(t){return t&&t.__esModule?t:{default:t}}function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};a.get||a.set?Object.defineProperty(e,i,a):e[i]=t[i]}return e.default=t,e}var c=s.View.extend({initialize:function(t){var e=this;this.model=t&&t.model||new s.Model({visible:!0,data:[],id:o.default.uid(),error_text:"No options available.",wait_text:"Please wait...",multiple:!1,optional:!1,onchange:function(){}}).set(t),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:visible",this._changeVisible,this),this.on("change",function(){e.model.get("onchange")(e.value())}),this.render()},render:function(){var t=this;this.$el.empty().removeClass().addClass("ui-options").append(this.$message=$("<div/>").addClass("mt-2")).append(this.$menu=$("<div/>").addClass("ui-options-menu")).append(this.$options=$(this._template())),this.all_button=null,this.model.get("multiple")&&(this.all_button=new h.default.ButtonCheck({onclick:function(){t.$("input").prop("checked",0!==t.all_button.value()),t.value(t._getValue()),t.trigger("change")}}),this.$menu.append(this.all_button.$el)),this._changeData(),this._changeWait(),this._changeVisible()},update:function(t){t.data&&this.model.set("data",t.data)},_changeData:function(){var e=this;this.$options.empty(),this._templateOptions?this.$options.append(this._templateOptions(this.model.get("data"))):l.each(this.model.get("data"),function(t){e.$options.append($(e._templateOption(t)).addClass("ui-option").tooltip({title:t.tooltip||"",placement:"bottom"}))}),this.$("input").on("change",function(){e.value(e._getValue()),e.trigger("change")}),this._changeValue(),this._changeWait()},_changeVisible:function(){this.$el[this.model.get("visible")?"show":"hide"]()},_changeWait:function(){this.model.get("wait")?0===this.length()&&(this._messageShow(this.model.get("wait_text"),"info"),this.$options.hide(),this.$menu.hide()):0===this.length()?(this._messageShow(this.model.get("error_text"),"danger"),this.$options.hide(),this.$menu.hide()):(this.$message.hide(),this.$options.css("display","inline-block"),this.$menu.show())},_changeValue:function(){this._setValue(this.model.get("value")),null!==this._getValue()||this.model.get("multiple")||this.model.get("optional")||this._setValue(this.first()),this.all_button&&this.all_button.value($.isArray(this._getValue())?this._getValue().length:0,this.length())},value:function(t){return void 0!==t&&this.model.set("value",t),this._getValue()},first:function(){var t=this.$("input").first();return 0<t.length?t.val():null},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},length:function(){return this.$(".ui-option").length},_setValue:function(t){var e=this;if(void 0!==t&&(this.$("input").prop("checked",!1),null!==t)){var i=$.isArray(t)?t:[t];l.each(i,function(t){e.$('input[value="'.concat(t,'"]')).first().prop("checked",!0)})}},_getValue:function(){var t=[];return this.$(":checked").each(function(){t.push($(this).val())}),o.default.isEmpty(t)?null:this.model.get("multiple")?t:t[0]},_messageShow:function(t,e){this.$message.show().removeClass().addClass("alert alert-".concat(e)).html(t)},_template:function(){return $("<div/>").addClass("ui-options-list")}}),p=c.extend({_templateOption:function(t){var e=o.default.uid();return $("<div/>").addClass("ui-option").append($("<input/>").attr({id:e,type:this.model.get("type"),name:this.model.id,value:t.value})).append($("<label/>").addClass("ui-options-label").attr("for",e).html(t.label))}}),r={};r.View=p.extend({initialize:function(t){t.type="radio",p.prototype.initialize.call(this,t)}});var g={};g.View=p.extend({initialize:function(t){t.type="checkbox",t.multiple=!0,p.prototype.initialize.call(this,t)}});var m={};m.View=c.extend({initialize:function(t){c.prototype.initialize.call(this,t)},_setValue:function(t){void 0!==t&&(this.$("input").prop("checked",!1),this.$("label").removeClass("active"),this.$('[value="'.concat(t,'"]')).prop("checked",!0).closest("label").addClass("active"))},_templateOption:function(t){var e=$("<label/>").addClass("btn btn-secondary");return t.icon&&e.append($("<i/>").addClass("fa").addClass(t.icon).addClass(!t.label&&"no-padding")),e.append($("<input/>").attr({type:"radio",name:this.model.id,value:t.value}).hide()),t.label&&e.append(t.label),e},_template:function(){return $("<div/>").addClass("btn-group ui-radiobutton")}}),t.default={Base:c,BaseIcons:p,Radio:r,RadioButton:m,Checkbox:g}});