define(["underscore","jquery","onload/loadConfig","app","layout/panel","layout/modal","utils/async-save-text","ui/popupmenu","ui/autocom_tagging","mvc/tours","mvc/webhooks","utils/utils","utils/installMonitor","polyfills","bootstrap","bootstrap-tour","scss/base.scss","apps/extended"],function(t,e,a,n,o,r,i,l,u,f,c,s,d){"use strict";var p,_=A(t),m=A(e),h=A(o),g=A(r),v=A(i),w=A(l),y=A(u),k=A(f),b=A(c),x=A(s);function A(t){return t&&t.__esModule?t:{default:t}}function T(o,r,t){m.default.fn.select2?(void 0===o&&(o=20),void 0===r&&(r=3e3),(t=t||(0,m.default)("select")).each(function(){var t,e,a=(0,m.default)(this).not("[multiple]"),n=a.find("option").length;n<o||r<n||(a.hasClass("no-autocomplete")||(t=a,e={placeholder:"Click to select",closeOnSelect:!(0,m.default)(t).is("[MULTIPLE]"),dropdownAutoWidth:!0,containerCssClass:"select2-minwidth"},t.select2(e)))})):console.warn("No select 2")}function O(){(0,m.default)("select[refresh_on_change='true']").off("change").change(function(){var t=(0,m.default)(this),e=t.val(),a=t.attr("refresh_on_change_values");if(a){a=a.split(",");var n=t.attr("last_selected_value");if(-1===m.default.inArray(e,a)&&-1===m.default.inArray(n,a))return}(0,m.default)(window).trigger("refresh_on_change"),(0,m.default)(document).trigger("convert_to_values"),t.get(0).form.submit()}),(0,m.default)(":checkbox[refresh_on_change='true']").off("click").click(function(){var t=(0,m.default)(this),e=t.val(),a=t.attr("refresh_on_change_values");if(a){a=a.split(",");var n=t.attr("last_selected_value");if(-1===m.default.inArray(e,a)&&-1===m.default.inArray(n,a))return}(0,m.default)(window).trigger("refresh_on_change"),t.get(0).form.submit()}),(0,m.default)("a[confirm]").off("click").click(function(){return confirm((0,m.default)(this).attr("confirm"))})}window.panels=h.default,_.default.extend(window,g.default),window.async_save_text=v.default,window.make_popupmenu=w.default.make_popupmenu,window.make_popup_menus=w.default.make_popup_menus,window.init_tag_click_function=y.default,window.init_refresh_on_change=O,(0,m.default)(document).ready(function(){O(),m.default.fn.tooltip&&((0,m.default)(".unified-panel-header [title]").tooltip({placement:"bottom"}),(0,m.default)("[title]").tooltip()),w.default.make_popup_menus(),T(20,1500),(0,m.default)("a").click(function(){var t=(0,m.default)(this),e=window.parent.frames&&window.parent.frames.galaxy_main;if("galaxy_main"==t.attr("target")&&!e){var a=t.attr("href");-1==a.indexOf("?")?a+="?":a+="&",a+="use_panels=True",t.attr("href",a),t.attr("target","_self")}return t}),k.default.activeGalaxyTourRunner();var e=(0,n.getGalaxyInstance)();e.giveTourWithData=k.default.giveTourWithData,function t(){void 0!==(0,a.getAppRoot)()?e.config.enable_webhooks&&b.default.load({type:"onload",callback:function(t){t.each(function(t){var e=t.toJSON();e.activate&&e.script&&x.default.appendScriptStyle(e)})}}):setTimeout(t,100)}()}),(p=Object.keys(g.default),function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(p)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()).concat(["panels","async_save_text","make_popupmenu","make_popup_menus","init_tag_click_function"]).forEach(function(t){return(0,d.installMonitor)(t)})});