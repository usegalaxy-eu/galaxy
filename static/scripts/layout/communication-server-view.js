define(["exports","backbone","underscore","utils/localization","mvc/ui/ui-modal"],function(e,a,o,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommunicationServerView=void 0;var n=c(a),s=c(o),d=r(t),m=r(i);function r(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var t=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};t.get||t.set?Object.defineProperty(a,o,t):a[o]=e[o]}return a.default=e,a}var p=e.CommunicationServerView=n.View.extend({initialize:function(){this.modal=null},makeModalIframe:function(e){var a=Galaxy.config.communication_server_host,o=Galaxy.config.communication_server_port,t=s.escape(Galaxy.user.attributes.username),i=s.escape(Galaxy.config.persistent_communication_rooms),n="?username=".concat(t,"&persistent_communication_rooms=").concat(i),d="".concat(a,":").concat(o).concat(n),r=null,c=null,l='<iframe class="h-100 w-100" src="'.concat(d,'"> </iframe>');return 0<$(".chat-modal").length&&$(".chat-modal").remove(),p.modal=new m.default.View({body:l,height:350,width:600,closing_events:!0,title_separator:!1,cls:"ui-modal chat-modal"}),p.modal.show(),r=$(".chat-modal .modal-header"),c=$(".chat-modal .modal-body"),r.addClass("modal-header-body"),c.addClass("modal-header-body"),r.find("h4").remove(),r.removeAttr("min-height padding border"),r.append('<i class="fa fa-comment" aria-hidden="true" title="Communicate with other users"></i><i class="fa fa-expand expand-compress-modal" aria-hidden="true" title="Maximize"></i><i class="fa fa-times close-modal" aria-hidden="true" title="Close"></i>'),$(".close-modal").click(function(e){$(".chat-modal").css("display","none")}),$(".expand-compress-modal").click(function(e){$(".expand-compress-modal").hasClass("fa-expand")?($(".chat-modal .modal-dialog").width("1000px"),$(".chat-modal .modal-body").height("575px"),$(".expand-compress-modal").removeClass("fa-expand").addClass("fa-compress"),$(".expand-compress-modal").attr("title","Minimize"),$(".expand-compress-modal").css("margin-left","96.2%")):($(".chat-modal .modal-dialog").width("".concat(600,"px")),$(".chat-modal .modal-body").height("".concat(350,"px")),$(".expand-compress-modal").removeClass("fa-compress").addClass("fa-expand"),$(".expand-compress-modal").attr("title","Maximize"),$(".expand-compress-modal").css("margin-left","93.2%"))}),this},render:function(){return{id:"show-chat-online",icon:"fa-comment-o",tooltip:(0,d.default)("Chat online"),visible:!1,onclick:this.makeModalIframe}}})});