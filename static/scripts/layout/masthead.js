define(["exports","jquery","backbone","layout/menu","layout/scratchbook","mvc/user/user-quotameter","app"],function(t,a,e,n,i,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=h(a),l=h(e),c=h(n),d=h(i),u=h(r);function h(t){return t&&t.__esModule?t:{default:t}}var f=l.default.View.extend({initialize:function(t){var a=(0,o.getGalaxyInstance)(),n=this;this.options=t,this.setElement(this._template()),this.$navbarBrandLink=this.$(".navbar-brand"),this.$navbarBrandImage=this.$(".navbar-brand-image"),this.$navbarBrandTitle=this.$(".navbar-brand-title"),this.$navbarTabs=this.$(".navbar-nav"),this.$quoteMeter=this.$(".quota-meter-container"),this.collection=new c.default.Collection,this.collection.on("add",function(t){n.$navbarTabs.append(new c.default.Tab({model:t}).render().$el)}).on("reset",function(){n.$navbarTabs.empty()}).on("dispatch",function(a){n.collection.each(function(t){a(t)})}).fetch(this.options),this.highlight(t.active_view),a.frame=this.frame=new d.default({collection:this.collection}),a.quotaMeter=this.quotaMeter=new u.default.UserQuotaMeter({model:a.user,el:this.$quoteMeter}),(0,s.default)(window).on("click",function(t){var a=(0,s.default)(t.target).closest("a[download]");1==a.length&&(0===(0,s.default)("iframe[id=download]").length&&(0,s.default)("body").append((0,s.default)("<iframe/>").attr("id","download").hide()),(0,s.default)("iframe[id=download]").attr("src",a.attr("href")),t.preventDefault())}).on("beforeunload",function(){var e="";if(n.collection.each(function(t){var a=t.get("onbeforeunload")&&t.get("onbeforeunload")();a&&(e+="".concat(a," "))}),""!==e)return e})},render:function(){return this.$navbarBrandTitle.html("Galaxy ".concat(this.options.brand&&"/ ".concat(this.options.brand)||"")),this.$navbarBrandLink.attr("href",this.options.logo_url),this.$navbarBrandImage.attr("src",this.options.logo_src),this.quotaMeter.render(),this},highlight:function(a){this.collection.forEach(function(t){t.set("active",t.id==a)})},_template:function(){return'\n            <nav id="masthead" class="navbar navbar-expand justify-content-center navbar-dark">\n                <a class="navbar-brand">\n                    <img class="navbar-brand-image"/>\n                    <span class="navbar-brand-title"/>\n                </a>\n                <ul class="navbar-nav"/>\n                <div class="quota-meter-container"/>\n            </nav>'}});t.default={View:f}});