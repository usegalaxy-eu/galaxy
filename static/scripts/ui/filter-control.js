define(["jquery"],function(e){"use strict";var t,i=(t=e)&&t.__esModule?t:{default:t};var l=i.default;function r(e,t){t=t||(_.isEmpty(e)?"":e[0]);var n=l(['<div class="dropdown-select btn-group">','<button type="button" class="btn btn-secondary">','<span class="dropdown-select-selected">'.concat(t,"</span>"),"</button>","</div>"].join("\n"));return e&&1<e.length&&(n.find("button").addClass("dropdown-toggle").attr("data-toggle","dropdown").append(' <span class="caret"></span>'),n.append(['<ul class="dropdown-menu" role="menu">',_.map(e,function(e){return['<li><a href="javascript:void(0)">',e,"</a></li>"].join("")}).join("\n"),"</ul>"].join("\n"))),n.find("a").click(function(e){var t=l(this),n=t.parents(".dropdown-select"),r=t.text();n.find(".dropdown-select-selected").text(r),n.trigger("change.dropdown-select",r)}),n}function s(e,t){return this.init(e,t)}s.prototype.DATA_KEY="filter-control",s.prototype.init=function(e,t){return t=t||{filters:[]},this.$element=l(e).addClass("filter-control btn-group"),this.options=i.default.extend(!0,{},this.defaults,t),this.currFilter=this.options.filters[0],this.render()},s.prototype.render=function(){return this.$element.empty().append([this._renderKeySelect(),this._renderOpSelect(),this._renderValueInput()]),this},s.prototype._renderKeySelect=function(){var n=this,e=this.options.filters.map(function(e){return e.key});return this.$keySelect=r(e,this.currFilter.key).addClass("filter-control-key").on("change.dropdown-select",function(e,t){n.currFilter=_.findWhere(n.options.filters,{key:t}),n.render()._triggerChange()}),this.$keySelect},s.prototype._renderOpSelect=function(){var n=this,e=this.currFilter.ops;return this.$opSelect=r(e,e[0]).addClass("filter-control-op").on("change.dropdown-select",function(e,t){n._triggerChange()}),this.$opSelect},s.prototype._renderValueInput=function(){var n=this;return this.currFilter.values?this.$valueSelect=r(this.currFilter.values,this.currFilter.values[0]).on("change.dropdown-select",function(e,t){n._triggerChange()}):this.$valueSelect=l("<input/>").addClass("form-control").on("change",function(e,t){n._triggerChange()}),this.$valueSelect.addClass("filter-control-value"),this.$valueSelect},s.prototype.val=function(){var e=this.$element.find(".filter-control-key .dropdown-select-selected").text(),t=this.$element.find(".filter-control-op .dropdown-select-selected").text(),n=this.$element.find(".filter-control-value");return{key:e,op:t,value:n.hasClass("dropdown-select")?n.find(".dropdown-select-selected").text():n.val()}},s.prototype._triggerChange=function(){this.$element.trigger("change.filter-control",this.val())},i.default.fn.extend({filterControl:function(r){var o=i.default.makeArray(arguments).slice(1);return this.map(function(){var e=l(this),t=e.data(s.prototype.DATA_KEY);if("object"===i.default.type(r)&&(t=new s(e,r),e.data(s.prototype.DATA_KEY,t)),t&&"string"===i.default.type(r)){var n=t[r];if("function"===i.default.type(n))return n.apply(t,o)}return this})}})});