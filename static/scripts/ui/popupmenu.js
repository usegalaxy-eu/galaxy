define(["exports","jquery"],function(e,t){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0});var a=((n=t)&&n.__esModule?n:{default:n}).default;function o(p,e){var t=p.data("menu_options");p.data("menu_options",e),t||p.bind("click.show_popup",function(i){return a(".popmenu-wrapper").remove(),setTimeout(function(){var o=a("<ul class='dropdown-menu' id='".concat(p.attr("id"),"-menu'></ul>")),e=p.data("menu_options");_.size(e)<=0&&a("<li>No Options.</li>").appendTo(o),a.each(e,function(e,t){if(t){var n=t.action||t;o.append(a("<li></li>").append(a("<a>").attr("href",t.url).html(e).click(n)))}else o.append(a("<li></li>").addClass("head").append(a("<a href='#'></a>").html(e)))});var t=a("<div class='popmenu-wrapper' style='position: absolute;left: 0; top: -1000;'></div>").append(o).appendTo("body"),n=i.pageX-t.width()/2;n=Math.min(n,a(document).scrollLeft()+a(window).width()-a(t).width()-5),n=Math.max(n,a(document).scrollLeft()+5),t.css({top:i.pageY,left:n})},10),setTimeout(function(){var e=function(e){a(e).bind("click.close_popup",function(){a(".popmenu-wrapper").remove(),e.unbind("click.close_popup")})};e(a(window.document)),e(a(window.top.document));for(var t=window.top.frames.length;t--;){e(a(window.top.frames[t].document))}},50),!1})}e.default={make_popupmenu:o,make_popup_menus:function(n){n=n||document,a(n).find("div[popupmenu]").each(function(){var p={},e=a(this);e.find("a").each(function(){var t=a(this),e=t.get(0),n=e.getAttribute("confirm"),o=e.getAttribute("href"),i=e.getAttribute("target");p[t.text()]=o?{url:o,action:function(e){if(!n||confirm(n)){if(i)return window.open(o,i),!1;t.click()}else e.preventDefault()}}:null});var t=a(n).find("#".concat(e.attr("popupmenu")));t.find("a").bind("click",function(e){return e.stopPropagation(),!0}),o(t,p),t.addClass("popup"),e.remove()})}}});